# 🎨 Text2Poster Generator 项目设计文档

## 📋 1. 概述

> **项目目标**: 实现一个能够批量生成线上活动宣传图的自动化脚本

本项目旨在实现一个能够批量生成线上活动宣传图的自动化脚本。脚本的核心功能是根据提供的文字列表，自动生成一系列具有统一背景和版式，但内容各异的宣传图片。整个流程将以一个本地或公开的网页模板为核心，利用 Playwright MCP 自动操作浏览器，将文本填充到指定位置，然后进行截图并保存为图片文件。开发过程将全程使用 Gemini CLI 进行编码、执行和迭代优化。

### 🎯 1.1 问题边界定义

#### 📥 输入
- 一个包含多条文本的列表或文件

#### ⚙️ 处理流程
脚本将遍历列表，对每一条文本执行以下操作：

1. 🔄 **加载预设的网页模板**
2. ✏️ **将文本动态填充到网页的特定元素中**
3. 📸 **截取网页中指定区域的图像**
4. 💾 **将截图保存为具有特定尺寸和命名格式的图片文件**

#### 📤 输出
- 一个包含所有生成图片文件的文件夹

#### 🛠️ 工具限制
- **核心开发和执行环境**: Gemini CLI
- **自动化浏览器**: Playwright MCP
- **版本控制**: Git

### 🎨 参考样式

**样式参考**: Reference-style文件夹下的三张图片
- `Reference-style\1.jpg`
- `Reference-style\2.jpg` 
- `Reference-style\3.jpg`


## 🚀 2. 任务拆解与技术选型

### 📝 2.1 任务拆解

本项目可以分解为以下几个主要步骤

#### 🔧 环境准备
- ✅ 初始化 Git 仓库
- 📦 安装所需的依赖，如 Playwright MCP

#### 🎨 网页模板设计与开发
- 🖼️ 基于参考图片，设计并开发一个 HTML/CSS 网页模板
- 🔗 模板需包含可供脚本动态填充的占位符（如 div 或 span）
- 📐 考虑到后续的截图尺寸，模板应设置为固定的宽高比

#### 💻 脚本核心逻辑开发
- 🐍 使用 Python编写脚本
- 📋 **主函数**: 接收一个文本列表作为参数
- 🔄 **核心循环**: 遍历文本列表

##### 🌐 浏览器操作函数
- 🚀 启动 Playwright MCP 浏览器实例
- 📂 打开网页模板文件
- ✏️ 使用 Playwright 将文本填充到指定元素
- 📸 截取网页区域
- 💾 保存图片
- 🔒 关闭浏览器实例

#### 🔄 自动化流程设计
- 📜 编写一个可由 Gemini CLI 调用的主脚本，该脚本将调用上述功能，实现端到端的自动化
- 📖 设计 `manual.md`，详细说明如何配置和运行脚本
- 🤖 如果需要 Gemini CLI 介入的步骤，编写 `cc-runner.md`

#### 🧪 TDD 与迭代优化
- 🎯 **测试基准**: 使用参考图片作为初始的视觉对比基准
- 🔍 **自动化对比**: 在 Gemini CLI 的帮助下，编写逻辑来比较生成图片与基准图片之间的差异（例如，通过像素对比、颜色直方图对比等方式），并根据差异调整脚本或模板
- 📝 记录 Gemini CLI 在此过程中的所有指令和思考，并整理到 `dev_log.md` 中

#### 📚 文档编写与整理
- 📋 `dev_log.md`: 记录开发过程中的关键决策、遇到的问题和解决方案
- 💭 `experience.md`: 记录整个项目的总结、心得和对 Gemini CLI + Playwright MCP 组合的思考
- 📖 `manual.md`: 编写清晰的脚本使用手册
- 🤖 `cc-runner.md`: （可选）编写 Gemini CLI 执行文档

### 🛠️ 2.2 技术栈

| 类别 | 技术选择 |
|------|----------|
| **编程语言** | 🐍 Python |
| **核心库** | • `playwright`: 用于浏览器自动化，通过 Playwright MCP 进行交互<br>• `os` / `pathlib`: 用于文件系统操作，如创建文件夹、保存文件 |
| **版本控制** | 📝 Git |
| **开发与执行环境** | 🤖 Gemini CLI |

## 📦 3. 交付物

| 类别 | 内容 | 状态 |
|------|------|------|
| **🔗 GitHub 仓库** | GitHub 仓库链接 | ⏳ 待定，开发完成后将在此处填充 |
| **📚 文档** | • `manual.md`<br>• `dev_log.md`<br>• `experience.md`<br>• `cc-runner.md` (可选) 
| **🖼️ 示例输出** | `output/` 文件夹（在仓库中可以作为示例存在，或在运行脚本后生成） 

## ✅ 5. 验收标准

### 🎯 功能要求
- ✅ 脚本能够无错运行，生成符合尺寸要求的图片
- 🎨 生成的图片在版式、字体、颜色等方面与参考图片高度相似

### 📝 文档要求  
- 📋 Git 提交历史清晰，反映出从模板设计、脚本编写到迭代优化的整个过程
- 📖 所有要求的文档都已完成，内容详实、清晰
- 💭 在 `experience.md` 中能体现出对 Gemini CLI 和 Playwright MCP 的深入理解和运用

---

> 💡 **项目愿景**: 通过自动化技术，让文字内容快速转化为精美的宣传图片，提升内容创作效率